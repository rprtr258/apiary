{"id":"apiary-1ba","title":"Fix eye button functionality in tab headers","description":"The eye button in tab headers currently doesn't work properly. It should hide all request parts of the tab pane and only show the response, but currently it only hides part of the request, doesn't change the icon properly, and subsequent clicks don't work.\n\nRoot causes identified:\n1. App.ts: Eye icon element is created once and never updated when signal changes\n2. RequestHTTP.ts: Has subscription logic but uses wrong element references\n3. Other request components: Missing proper signal subscriptions and layout updates\n4. All components: Need to handle dynamic layout changes when request is hidden","design":"## Implementation Strategy\n\n### Core Principle\nUse direct DOM manipulation (no framework) to:\n1. Update eye icon when signal changes\n2. Toggle request panel visibility \n3. Expand response panel to full width when request is hidden\n\n### Architecture Changes\n\n#### 1. App.ts - Eye Button Icon Update\n- Store eye button element reference\n- Subscribe to `show_request.sub()` \n- Replace icon SVG on signal change\n- Update title text on signal change\n\n#### 2. Request Components - Layout Toggle\nEach request component needs:\n- Store references to request and response panel elements\n- Subscribe to `show_request.sub()` \n- Update parent container layout on signal change:\n  - **True (show)**: Split view (request + response)\n  - **False (hide)**: Response only (full width)\n\n#### 3. NSplit Component Handling\n- Current NSplit creates fixed grid layout\n- Need to either:\n  - Replace NSplit with conditional layout, OR\n  - Hide/show panels within existing NSplit, OR  \n  - Use CSS to hide request panel and expand response\n\n### Component-specific Fixes\n\n**High Priority:**\n- RequestHTTP.ts: Fix subscription logic and layout\n- RequestSQL.ts: Add subscription and layout toggle\n- RequestJQ.ts: Add subscription and layout toggle\n- RequestMD.ts: Add subscription and layout toggle\n\n**Medium Priority:**\n- RequestGRPC.ts: Implement show_request support\n- RequestRedis.ts: Implement show_request support\n- RequestSQLSource.ts: Add proper subscription\n\n### Implementation Pattern\n```typescript\n// In each request component's loaded() function:\nconst requestPanel = /* element */;\nconst responsePanel = /* element */;\n\nshow_request.sub((show) =\u003e {\n  if (show) {\n    // Show split layout\n    el.replaceChildren(NSplit(requestPanel, responsePanel));\n  } else {\n    // Show response only (full width)\n    el.replaceChildren(responsePanel);\n    responsePanel.style.width = \"100%\";\n  }\n});\n```\n\n### Testing Strategy\n1. Click eye button - icon should toggle\n2. Click eye button again - icon should toggle back\n3. Request panel should hide/show accordingly\n4. Response panel should expand to full width when request hidden\n5. All request types should work identically","acceptance_criteria":"1. Eye button icon changes between open/closed eye on click\n2. Eye button title updates between \"Hide request\" and \"Show request\"\n3. Clicking eye button multiple times works correctly\n4. When eye is closed, request panel is completely hidden\n5. When eye is closed, response panel takes full width\n6. When eye is open, split view is restored\n7. All request types (HTTP, SQL, JQ, MD, GRPC, Redis, SQLSource) work consistently","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T04:06:27.115405842+03:00","updated_at":"2026-01-03T04:20:37.440835138+03:00","closed_at":"2026-01-03T04:20:37.440835138+03:00","close_reason":"Closed via update"}
{"id":"apiary-229","title":"Fix RequestJQ.ts show_request signal handling","description":"RequestJQ.ts uses show_request.value once during initial render but doesn't subscribe to changes. Need to add show_request.sub() and update layout dynamically when signal changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T04:07:21.761820861+03:00","updated_at":"2026-01-03T04:20:49.879130409+03:00","closed_at":"2026-01-03T04:20:49.879130409+03:00","close_reason":"Completed","dependencies":[{"issue_id":"apiary-229","depends_on_id":"apiary-1ba","type":"blocks","created_at":"2026-01-03T04:07:49.844356369+03:00","created_by":"daemon"}]}
{"id":"apiary-2sf","title":"Fix RequestMD.ts show_request signal handling","description":"RequestMD.ts uses show_request.value in grid columns but doesn't subscribe to changes. Need to add show_request.sub() and update layout dynamically when signal changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T04:07:24.631796503+03:00","updated_at":"2026-01-03T04:20:52.206934247+03:00","closed_at":"2026-01-03T04:20:52.206934247+03:00","close_reason":"Completed","dependencies":[{"issue_id":"apiary-2sf","depends_on_id":"apiary-1ba","type":"blocks","created_at":"2026-01-03T04:08:03.090546019+03:00","created_by":"daemon"}]}
{"id":"apiary-4rz","title":"Standardize NSplit component and fix memory leaks","description":"1. Extract NSplit to shared component in layout.ts\n2. Implement cleanup logic for signal subscriptions\n3. Simplify updateLayout to update styles instead of recreating elements\n4. Fix missing NSplit in RequestGRPC.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T05:10:40.751290017+03:00","updated_at":"2026-01-03T06:43:12.823948176+03:00","closed_at":"2026-01-03T06:43:12.823948176+03:00","close_reason":"Split into focused tasks - contains duplicate of signal subscription cleanup","dependencies":[{"issue_id":"apiary-4rz","depends_on_id":"apiary-dy6","type":"related","created_at":"2026-01-03T06:35:33.108579315+03:00","created_by":"daemon"}]}
{"id":"apiary-4sm","title":"Fix App.ts eye button icon update mechanism","description":"The eye button icon in App.ts is created once and never updates when the show_request signal changes. Need to add proper subscription to update icon and title dynamically.\n\nCurrent code creates icon once and never updates it. Need to add show_request.sub() to update icon and title on signal changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T04:06:59.15928+03:00","updated_at":"2026-01-03T04:20:39.741599199+03:00","closed_at":"2026-01-03T04:20:39.741599199+03:00","close_reason":"Completed","dependencies":[{"issue_id":"apiary-4sm","depends_on_id":"apiary-1ba","type":"blocks","created_at":"2026-01-03T04:07:39.089912801+03:00","created_by":"daemon"}]}
{"id":"apiary-9sm","title":"Fix RequestGRPC.ts to use show_request signal","description":"RequestGRPC.ts doesn't use show_request signal at all. Need to implement show_request support with proper subscription and layout toggle.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T04:07:29.339425681+03:00","updated_at":"2026-01-03T04:20:54.534479564+03:00","closed_at":"2026-01-03T04:20:54.534479564+03:00","close_reason":"Completed"}
{"id":"apiary-boq","title":"Fix RequestHTTP.ts show_request signal subscription and layout","description":"RequestHTTP.ts has subscription logic but uses wrong element references. The el_req variable is never attached to DOM, so replaceChildren calls don't work. Need to fix layout to show/hide request panel and expand response when hidden.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T04:07:10.16443571+03:00","updated_at":"2026-01-03T04:20:42.637620247+03:00","closed_at":"2026-01-03T04:20:42.637620247+03:00","close_reason":"Completed","dependencies":[{"issue_id":"apiary-boq","depends_on_id":"apiary-1ba","type":"blocks","created_at":"2026-01-03T04:07:43.179024595+03:00","created_by":"daemon"}]}
{"id":"apiary-dy6","title":"Fix memory leaks from signal subscriptions not being unsubscribed","description":"The signal subscription system in utils.ts returns an unsubscribe function, but none of the components are calling it. This causes memory leaks when components are destroyed or tabs are closed.\n\nCurrent issues:\n1. Request components (HTTP, SQL, GRPC, JQ, Redis, MD, SQLSource) all call show_request.sub() without storing the unsubscribe function\n2. App.ts panelkaFactory subscribes to show_request.sub() without cleanup\n3. No unmount/cleanup mechanism exists in the component lifecycle\n\nThis needs to be fixed by:\n1. Storing unsubscribe functions returned by signal.sub()\n2. Calling unsubscribe when components are destroyed/tabs closed\n3. Implementing proper cleanup in panelkaFactory\n4. Adding unmount methods to all request components","acceptance_criteria":"All signal subscriptions have corresponding unsubscribe calls, memory leaks are eliminated when tabs are closed","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T06:35:24.749175247+03:00","updated_at":"2026-01-03T06:35:24.749175247+03:00"}
{"id":"apiary-gqz","title":"Fix RequestSQLSource.ts show_request signal handling","description":"RequestSQLSource.ts needs proper show_request subscription and layout toggle implementation.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T04:07:36.534768358+03:00","updated_at":"2026-01-03T04:21:14.779697245+03:00","closed_at":"2026-01-03T04:21:14.779697245+03:00","close_reason":"Completed"}
{"id":"apiary-jbn","title":"Extract NSplit to shared component in layout.ts","description":"Move NSplit function from individual request files to shared layout.ts. Currently NSplit is duplicated in RequestHTTP.ts, RequestSQL.ts, RequestJQ.ts, RequestRedis.ts, RequestMD.ts, and RequestSQLSource.ts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T06:43:16.420158967+03:00","updated_at":"2026-01-03T06:43:16.420158967+03:00"}
{"id":"apiary-n5f","title":"Add NSplit to RequestGRPC.ts","description":"RequestGRPC.ts is missing NSplit usage for split layout. Should match pattern used in other request files after NSplit is extracted to layout.ts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T06:43:21.380055724+03:00","updated_at":"2026-01-03T06:43:21.380055724+03:00","dependencies":[{"issue_id":"apiary-n5f","depends_on_id":"apiary-jbn","type":"blocks","created_at":"2026-01-03T06:43:27.575284502+03:00","created_by":"daemon"}]}
{"id":"apiary-p9l","title":"Fix RequestRedis.ts to use show_request signal","description":"RequestRedis.ts doesn't use show_request signal at all. Need to implement show_request support with proper subscription and layout toggle.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T04:07:33.751401989+03:00","updated_at":"2026-01-03T04:21:01.487487007+03:00","closed_at":"2026-01-03T04:21:01.487487007+03:00","close_reason":"Completed"}
{"id":"apiary-vzf","title":"Optimize updateLayout to update styles instead of recreating elements","description":"updateLayout functions in all request files recreate DOM elements on every show_request signal change. Should update styles/visibility instead to improve performance and reduce memory churn","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T06:43:23.988862013+03:00","updated_at":"2026-01-03T06:43:23.988862013+03:00"}
{"id":"apiary-ygr","title":"Fix RequestSQL.ts show_request signal handling","description":"RequestSQL.ts uses show_request.value once during initial render but doesn't subscribe to changes. Need to add show_request.sub() and update layout dynamically when signal changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T04:07:17.273587912+03:00","updated_at":"2026-01-03T04:20:47.787750627+03:00","closed_at":"2026-01-03T04:20:47.787750627+03:00","close_reason":"Completed","dependencies":[{"issue_id":"apiary-ygr","depends_on_id":"apiary-1ba","type":"blocks","created_at":"2026-01-03T04:07:45.445911496+03:00","created_by":"daemon"}]}
